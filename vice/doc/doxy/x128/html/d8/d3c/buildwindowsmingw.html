<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>x128: GTK3 on Windows (MinGW)</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../vice-logo.svg"/></td>
  <td id="projectalign">
   <div id="projectname">x128<span id="projectnumber">&#160;3.8</span>
   </div>
   <div id="projectbrief">Versatile Commodore Emulator and Virtual Commodore Environment</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('d8/d3c/buildwindowsmingw.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">GTK3 on Windows (MinGW) </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><tt>
VICE on Windows - The Next G(TK)eneration<br>
=========================================<br>
<br>
These are some instructions about getting VICE with the GTK3 GUI<br>
compiled on Windows under MinGW.<br>
<br>
<br>
NOTE: Although msys2 can build both 32-bit and 64-bit Windows binaries, a<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;64-bit Windows (7 or later) host is required.<br>
<br>
<br>
1. Get MSYS2 (includes mingw):<br>
 <a href="http://www.msys2.org/">http://www.msys2.org/</a><br>
Install as per that webpage.<br>
<br>
<br>
1.1. Update the distribution:<br>
<br>
$ pacman -Syu<br>
<br>
This will usually update only a few packages (the package manager itself and<br>
some related packages), and then require you to exit the shell by clicking 'x'.<br>
You can then start the shell again and run the same command again to update the<br>
rest of the packages.<br>
<br>
<br>
<br>
2. Check your MSYS2 username for spaces, for example:<br>
<br>
$ whoami<br>
David Hogan<br>
<br>
If your Windows username has spaces like mine (David Hogan), then your<br>
home dir will also have spaces in it, which causes problems with our<br>
bindist build script later. To fix this, you'll need to change your MSYS2<br>
home dir to something without spaces in it.<br>
<br>
$ /usr/bin/mkpasswd &gt; /etc/passwd<br>
<br>
Use your favourite editor to change your home dir entry in /etc/passwd:<br>
<br>
$ # pacman -S vim<br>
$ # vim /etc/passwd<br>
<br>
For example, change "/home/David Hogan" to "/home/dqh". You also can change<br>
the username at the start of the entry if you like.<br>
<br>
Finally, rename your existing homedir folder and exit and relaunch the<br>
MSYS2 shell:<br>
<br>
$ cd /home<br>
$ # mv 'David Hogan' dqh<br>
$ exit<br>
<br>
&lt;relaunch MSYS2 MinGW&gt;<br>
<br>
$ pwd<br>
/home/dqh<br>
<br>
$ whoami<br>
dqh<br>
<br>
<br>
*******************************************************************************<br>
* 3. Install the stuff that you need to build VICE:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; *<br>
*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; *<br>
* Launch either the MSYS2 MinGW 64-bit shell or the MSYS2 MinGW 32-bit shell&nbsp;&nbsp;*<br>
* (use the one that matches the version of MSYS2 that you installed).&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; *<br>
*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; *<br>
* DON'T USE THE NON-MINGW ONE, STUFF WON'T WORK.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br>
*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; *<br>
* To check if the correct shell is used, run `echo $MSYSTEM`, it should print *<br>
* "MINGW64" (or "MINGW32"), if it prints "MSYS" you're using the wrong shell. *<br>
*******************************************************************************<br>
<br>
<br>
Run the following command lines to install the prerequisites:<br>
<br>
$ pacman -S --noconfirm --needed base-devel pactoys<br>
$ pacboy sync autotools pkg-config gcc ntldd unzip: zip: p7zip: subversion: gtk3 glew icoutils xa65 curl<br>
<br>
(Note: type the colons that you see in the second command; they are important.<br>
 Hit enter for the default on all the prompts, then wait for a lot of stuff<br>
 to download and install.)<br>
<br>
if you want to get all the extras right now as well, add<br>
<br>
$ pacboy sync portaudio giflib flac mpg123 libvorbis lame<br>
<br>
See further below for details; some options require adding flags to configure.<br>
<br>
<br>
<br>
4. Get MiKTeX, in order to build the PDF documentation (optional).<br>
NOTE: if you skip this step, you will need to ./configure with --disable-pdf-docs<br>
<br>
Download and install it, see: https://miktex.org/howto/install-miktex<br>
<br>
Set $PATH so configure will find the required binaries:<br>
<br>
(My MiKTeX path is C:\miktex, I'll use that as the example -- assumes 64-bit<br>
 Windows.)<br>
$ export PATH="$PATH:/c/miktex/miktex/bin/x64"<br>
<br>
Remember either to do that last step every time you open the msys64 terminal,<br>
or edit your "~/.bash_profile".<br>
<br>
Also, add this line to your "~/.bash_profile" file:<br>
<br>
export OSTYPE="MSYS"<br>
<br>
(It works around a current bug that makes it impossible to build the PDF<br>
document without that line.)<br>
<br>
If you change your ".bash_profile" exit from the shell and relaunch that<br>
shell (it will use your updated profile).<br>
<br>
<br>
<br>
5. Get VICE's source code.<br>
To check out the source with Subversion (into "~/vice-trunk/", for example),<br>
you could type:<br>
<br>
$ cd ~<br>
$ svn checkout <a href="http://svn.code.sf.net/p/vice-emu/code/trunk">http://svn.code.sf.net/p/vice-emu/code/trunk</a> vice-trunk<br>
<br>
<br>
<br>
6. Now, you can try to build VICE:<br>
<br>
$ cd ~/vice-trunk/vice<br>
$ ./autogen.sh<br>
$ ./configure -C --enable-gtk3ui<br>
$ make -s --no-print-dir<br>
$ make -s --no-print-dir bindist<br>
<br>
NOTE: if you want to help us out with bug reports, please instead configure<br>
with:<br>
<br>
$ ./configure -C --enable-gtk3ui --enable-debug-gtk3ui --enable-debug<br>
<br>
<br>
<br>
7. If it got through all those steps, you should have some executables to play<br>
with in "GTK3VICE-3.?-win??-*/" (the "win??" part of that name tells you which<br>
type [32-bit or 64-bit] you built).<br>
<br>
<br>
<br>
8. You can build the 32-bit version of VICE and/or the 64-bit version.&nbsp;&nbsp;You<br>
make the choice by choosing to run a particular one of the MSYS2 MinGW shells<br>
(its environment variables control VICE's configuration).<br>
<br>
If you build one version, then want to build the other version, you must clean<br>
away the object files first.&nbsp;&nbsp;Then, you must configure VICE again.<br>
<br>
$ make clean<br>
$ rm config.cache<br>
$ ./configure -C --enable-gtk3ui<br>
$ make -s --no-print-dir<br>
$ make -s --no-print-dir bindist<br>
<br>
<br>
9. If you want the distribution in a ZIP or a 7z archive instead of a<br>
subdirectory then use one of these commands (instead of "make -s --no-print-dir bindist").<br>
Use this for a ZIP-format bindist:<br>
<br>
$ make -s --no-print-dir bindistzip<br>
<br>
or this for a 7z bindist:<br>
<br>
$ make -s --no-print-dir bindist7zip<br>
<br>
<br>
<br>
10. Optional features<br>
<br>
You can install other packages if you want to add features to VICE.<br>
<br>
If you install any of these packages after you have built VICE, rerun<br>
"./configure" (using the respective options) and "make" to produce updated<br>
binaries that make use of the new options.<br>
<br>
$ pacboy sync curl (needed for wic64, reconfigure with --with-libcurl)<br>
$ pacboy sync portaudio (needed for sampler input, reconfigure with --enable-portaudio)<br>
$ pacboy sync giflib (reconfigure with --with-gif)<br>
$ pacboy sync flac (reconfigure with --with-flac)<br>
$ pacboy sync mpg123 (reconfigure with --with-mpg123)<br>
$ pacboy sync lame (reconfigure with --with-lame)<br>
$ pacboy sync libvorbis (reconfigure with --with-vorbis)<br>
<br>
<br>
10.1 Extra Libraries<br>
<br>
Some extra libraries must be built from source, since there are no packages<br>
for msys2:<br>
<br>
First lets install some tools that will help us to download stuff :)<br>
<br>
$ pacman -S git wget<br>
<br>
now we can build/install extra libraries:<br>
<br>
<br>
10.2 libieee1284 (required for parsid)<br>
<br>
We need some tools for libieee1284 to build:<br>
<br>
# This assumes compiling for x86_64:<br>
$ pacman -S libtool xmlto mingw-w64-x86_64-docbook-{xml,xsl}<br>
$ export XML_CATALOG_FILES="/mingw64/etc/xml/catalog"<br>
<br>
$ mkdir ~/work &amp;&amp; cd ~/work<br>
$ git clone https://github.com/twaugh/libieee1284 .<br>
$ ./bootstrap<br>
$ ./configure --without-python<br>
$ make CFLAGS="-Wno-incompatible-pointer-types" -s &amp;&amp; make -s install<br>
$ cd .. &amp;&amp; rm -rf work<br>
<br>
reconfigure with --enable-parsid --enable-libieee1284<br>
<br>
<br>
<br>
Enjoy!<br>
</tt>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../index.html">Developer Information</a></li><li class="navelem"><a class="el" href="../../d4/d5a/howtobuild.html">How to build VICE</a></li>
    <li class="footer">Generated on Sun Jun 16 2024 16:43:06 for x128 by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4 </li>
  </ul>
</div>
</body>
</html>
